# Railway 部署指南

## 🚀 **快速部署步驟**

### 1. GitHub 倉庫準備
確保代碼已推送到 GitHub：
```bash
git add .
git commit -m "Railway deployment ready"
git push origin main
```

### 2. Railway 平台設置
1. 前往 [railway.app](https://railway.app)
2. 連接 GitHub 倉庫：`https://github.com/KennethEnglun/aibooking.git`
3. 選擇 `main` 分支進行部署

### 3. 環境變量配置 ⚙️
在 Railway 儀表板中設置以下環境變量：

#### **必需環境變量**
```bash
NODE_ENV=production
DEEPSEEK_API_KEY=sk-c47eb9db749e4d0da072557681f52e83
ADMIN_PASSWORD=admin2024!@#
```

#### **可選環境變量**
```bash
PORT=8080  # Railway會自動設置，無需手動配置
```

### 4. 部署確認 ✅
部署完成後，系統將提供以下功能：

#### **AI場地預訂功能**
- ✅ 支持自然語言預訂（年月日、星期、相對時間）
- ✅ 支持重複預訂（每週一、每天等）
- ✅ 智能時間衝突檢測
- ✅ DeepSeek AI 語言理解

#### **管理員功能**
- 🔐 管理員登入：密碼 `admin2024!@#`
- 📊 預訂統計和儀表板
- ✏️ 預訂管理（修改、刪除）
- 📈 使用情況報告

#### **用戶功能**
- 📅 公開時間表查看
- 🤖 AI智能預訂助手
- 📱 響應式界面設計

## 🔧 **技術特性**

### 支持的預訂格式
| 格式 | 示例 |
|------|------|
| 具體日期 | "2024年1月15日下午2點在101室開會" |
| 相對時間 | "明天上午10點借音樂室練習" |
| 星期 | "下週三晚上7點使用禮堂" |
| 重複預訂 | "每週一下午3點在會議室培訓" |

### 重複預訂支持
- 每週重複：`每週一`、`逢星期三`
- 每日重複：`每天`、`每日`
- 每月重複：`每月`

### 場地列表
支持21個場地，包括：
- 普通教室：101-103室、201-203室、301-303室
- 專用室：音樂室、美術室、電腦室、語言實驗室、科學實驗室
- 大型場地：圖書館、體育館、禮堂、會議室、多功能室、天台、操場

## 🐛 **故障排除**

### 常見問題及解決方案

#### 1. 管理員無法登入
**問題**：輸入密碼後提示"管理員密碼錯誤"
**解決**：確保環境變量 `ADMIN_PASSWORD=admin2024!@#` 已正確設置

#### 2. AI 理解能力問題
**問題**：AI 無法理解日期格式
**解決**：系統已支援多種格式，建議使用：
- ✅ "2024年1月15日下午2點"
- ✅ "明天上午10點"
- ✅ "下週三晚上7點"

#### 3. 預訂確認失敗
**問題**：AI 理解後確認預訂時失敗
**解決**：已修復API調用問題，現在直接處理預訂邏輯

#### 4. 時間表顯示空白
**問題**：時間表頁面沒有內容
**解決**：已修復API端點，現在支持公開訪問

#### 5. 重複預訂不生效
**問題**：說"每週一"但只創建一次預訂
**解決**：系統現在支持重複預訂，會自動創建未來12週的預訂

## 📊 **系統監控**

### 健康檢查
- 端點：`/health`
- 超時：600秒
- 重試：10次
- 間隔：30秒

### 日誌查看
在 Railway 儀表板中查看實時日誌，監控：
- AI API 調用狀態
- 預訂創建情況
- 錯誤和異常

## 🔄 **更新部署**

當需要更新代碼時：
```bash
git add .
git commit -m "更新功能"
git push origin main
```
Railway 會自動觸發重新部署。

## 📞 **支援聯絡**

如果遇到問題，請檢查：
1. Railway 部署日誌
2. 環境變量設置
3. DeepSeek API 配額狀態

---
**部署時間**: `{{ 部署時間會自動更新 }}`
**版本**: v2.0 - 增強AI理解 + 重複預訂功能 